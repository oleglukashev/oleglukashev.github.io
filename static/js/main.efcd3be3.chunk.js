(this.webpackJsonporbita=this.webpackJsonporbita||[]).push([[0],{73:function(e,t,a){e.exports=a(97)},92:function(e,t,a){},94:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(34),l=a.n(c),o=a(25),s=a(15),i=a(12),m=a(30),p=a(69),u=a(53),d=a(70);function h(e){return function(t){return t({type:"UPDATE_MAP",payload:e})}}var E={center:[55.205,37.09],zoom:7};var b=Object(s.c)({routing:m.routerReducer,map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"UPDATE_MAP":return Object.assign({},t.payload);default:return e}},areas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"FETCH_AREAS":return Object.assign([],t.payload);case"CREATE_AREAS":return e.concat([t.payload]);case"UPDATE_AREAS":return e.map((function(e){return e.id!==t.id?e:Object(d.a)({},e,{},t.payload)}));case"REMOVE_AREAS":var a=e.indexOf(t.payload);return[].concat(Object(u.a)(e.slice(0,a)),Object(u.a)(e.slice(a+1)));default:return e}},tracks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"FETCH_TRACKS":return Object.assign([],t.payload);default:return e}}}),v=a(62),y=a(51),g=a.n(y),f=g.a.mark(k);function k(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),f)}var N=[v.a];N.push(Object(m.routerMiddleware)(i.d));var O=Object(p.a)();N.push(O);var A=s.a.apply(void 0,N);var j=Object(s.e)(b,A),C=Object(m.syncHistoryWithStore)(i.d,j);O.run(k);var T,w=a(17),S=a(18),_=a(20),R=a(19),z=a(21),D=(a(92),function(e){function t(){var e,a;Object(w.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(_.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).state={collapseOpen:!1},a.openCollapse=function(){a.setState({collapseOpen:!0})},a.closeCollapse=function(){a.setState({collapseOpen:!1})},a}return Object(z.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e="collapse navbar-collapse";return this.state.collapseOpen&&(e+=" show"),r.a.createElement("section",{id:"wrapper"},r.a.createElement("div",{id:"sidenav-main",className:"navbar-vertical fixed-left navbar-light bg-white navbar navbar-expand-md"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("button",{className:"navbar-toggler",type:"button",onClick:this.openCollapse},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:e,onClick:this.closeCollapse},r.a.createElement("div",{className:"navbar-collapse-header d-md-none"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"collapse-brand col-6"},r.a.createElement("a",{href:"/"},"Menu")),r.a.createElement("div",{className:"collapse-close col-6"},r.a.createElement("button",{className:"navbar-toggler",onClick:this.closeCollapse,type:"button"},r.a.createElement("span",null),r.a.createElement("span",null))))),r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.a,{to:"/",activeClassName:"active",className:"nav-link"},"Areas")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.a,{to:"/tracks",activeClassName:"active",className:"nav-link"},"Tracks")))))),r.a.createElement("div",{className:"main-content"},this.props.children))}}]),t}(r.a.Component)),M=a(102),x=a(103),P=a(104),F=a(98),H=a(99),U=a(100),L=a(68);a(94);var Q=Object(o.b)((function(e,t){return{areas:e.areas,map:e.map}}))(T=function(e){function t(){var e,a;Object(w.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(_.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).state={currentArea:null},a}return Object(z.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(function(){var e=[{id:1,name:"Green Circle",type:"circle",latlng:[55.205,37.09],radius:2e4,color:"green"},{id:2,name:"Blue Circle",type:"circle",latlng:[56.205,38.09],radius:5e4,color:"blue"},{id:3,name:"Red Polygone",type:"polygon",latlng:[[55.205,37.09],[55.904,37.9],[55.904,34.9],[55.205,32.04]],color:"red"}];return function(t){return t({type:"FETCH_AREAS",payload:e})}}())}},{key:"componentDidUpdate",value:function(e){var t=this.props.areas;!e.areas.length&&t.length&&this.setState({currentArea:t[0]})}},{key:"_onCreate",value:function(e){var t,a=this.props,n=a.areas,r=a.dispatch,c=n[n.length-1].id+1,l=e.layer.options,o={id:c,name:"Figure "+c,type:e.layerType,color:l.color};"circle"===e.layerType?(o.latlng=e.layer.getBounds().getCenter(),o.radius=l.radius):"polygon"===e.layerType&&(o.latlng=e.layer.getLatLngs()),r((t=o,function(e){return e({type:"CREATE_AREAS",payload:t})})),this.setState({currentArea:o}),e.layer.remove(),alert(o.latlng)}},{key:"_onDrag",value:function(e){var t=e.target.getCenter();(0,this.props.dispatch)(h({center:[t.lat,t.lng],zoom:e.target.options.zoom}))}},{key:"deleteArea",value:function(e){var t=this.props,a=t.areas;(0,t.dispatch)(function(e){return function(t){return t({type:"REMOVE_AREAS",payload:e})}}(e)),this.state.currentArea&&this.state.currentArea.id!==e.id||this.setState({currentArea:a.filter((function(t){return t.id!==e.id}))[0]})}},{key:"selectArea",value:function(e){this.setState({currentArea:e})}},{key:"render",value:function(){var e=this,t=this.props.map,a=this.state.currentArea,n=this.props.areas;return r.a.createElement("div",{className:"row m-0"},r.a.createElement("div",{className:"contant-container col-md-4 p-0 pt-3"},r.a.createElement("h3",{className:"mb-3 ml-3"},"Areas"),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",{className:"text-right"},"Actions"))),r.a.createElement("tbody",null,n.map((function(t){return r.a.createElement("tr",{key:t.id,className:a&&t.id===a.id?"bg-white":""},r.a.createElement("td",null,t.name),r.a.createElement("td",{className:"text-right"},r.a.createElement(M.a,{onClick:e.selectArea.bind(e,t),color:"success",size:"sm",type:"button",className:"btn-icon btn-2"},r.a.createElement("span",{className:"btn-inner--icon m-0"},r.a.createElement("i",{className:"ni ni-pin-3"}))),r.a.createElement(M.a,{onClick:e.deleteArea.bind(e,t),color:"danger",size:"sm",type:"button",className:"btn-icon btn-2"},r.a.createElement("span",{className:"btn-inner--icon m-0"},r.a.createElement("i",{className:"ni ni-fat-remove"})))))})))),a&&r.a.createElement("div",{className:"p-3"},r.a.createElement(M.a,{onClick:this.selectArea.bind(this,null),className:"w-100",color:"primary",size:"md",type:"button"},"Create new area")))),r.a.createElement("div",{className:"map-container col-md-8 p-0"},r.a.createElement(x.a,{center:t.center,zoom:t.zoom,onDragend:this._onDrag.bind(this)},r.a.createElement(P.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.osm.org/{z}/{x}/{y}.png"}),r.a.createElement(F.a,null,r.a.createElement(L.a,{position:"topright",onEdited:this._onEditPath,onCreated:this._onCreate.bind(this),onDeleted:this._onDeleted,draw:{polygon:!a,circle:!a,rectangle:!1,polyline:!1,circlemarker:!1,marker:!1},edit:{edit:!1,remove:!1}})),a&&"circle"===a.type&&r.a.createElement(H.a,{center:a.latlng,radius:a.radius,color:a.color}),a&&"polygon"===a.type&&r.a.createElement(U.a,{positions:a.latlng,color:a.color}))))}}]),t}(n.Component))||T,B=a(101),I=a(105),J=a(71),K=a(3),V=a.n(K),q=a(0),G=a.n(q),W=a(27),X=a(10),Y=(a(95),function(e){function t(){return Object(w.a)(this,t),Object(_.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(S.a)(t,[{key:"createLeafletElement",value:function(e){var t=e.positions,a=e.option,n=Object(J.a)(e,["positions","option"]);return V.a.curve(t,a,this.getOptions(n))}},{key:"updateLeafletElement",value:function(e,t){t.positions!==e.positions&&this.leafletElement.setPath(t.positions),this.setStyleIfChanged(e,t)}}]),t}(W.a));Y.propTypes={children:G.a.oneOfType([G.a.arrayOf(G.a.node),G.a.node]),option:G.a.object,positions:G.a.array.isRequired};var Z,$=Object(X.b)(Y);a(96);var ee=Object(o.b)((function(e){return{tracks:e.tracks,map:e.map}}))(Z=function(e){function t(){var e,a;Object(w.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(_.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).state={currentTrack:null},a}return Object(z.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(function(){var e=[{id:1,name:"Track 1",path:["M",[55.14874640066278,37.1064453125],"Q",[55.67255514839676,37.30371093750001],[55.14874640066278,37.67675781250001],"T",[54.866316729538674,36.0927734375]],latlng:[[55.14874640066278,37.1064453125],[55.14874640066278,37.67675781250001],[54.866316729538674,36.0927734375]],color:"green"},{id:2,name:"Track 2",path:["M",[53.14874640066278,33.1064453125],"Q",[57.67255514839676,39.30371093750001],[58.14874640066278,33.67675781250001],"T",[55.866316729538674,36.0927734375]],latlng:[[53.14874640066278,33.1064453125],[58.14874640066278,33.67675781250001],[55.866316729538674,36.0927734375]],color:"blue"},{id:3,name:"Track 3",path:["M",[53.14874640066278,29.106445312500004],"Q",[54.67255514839676,33.30371093750001],[55.14874640066278,34.67675781250001],"T",[57.866316729538674,36.0927734375]],latlng:[[53.14874640066278,29.106445312500004],[55.14874640066278,34.67675781250001],[57.866316729538674,36.0927734375]],color:"red"},{id:4,name:"Track 4",path:["M",[55.14874640066278,33.1064453125],"Q",[55.19255514839676,32.30371093750001],[55.14874640066278,31.676757812500004],"T",[54.866316729538674,36.0927734375]],latlng:[[55.14874640066278,33.1064453125],[55.14874640066278,31.676757812500004],[54.866316729538674,36.0927734375]],color:"yellow"}];return function(t){return t({type:"FETCH_TRACKS",payload:e})}}())}},{key:"componentDidUpdate",value:function(e){var t=this.props.tracks;!e.tracks.length&&t.length&&this.setState({currentTrack:t[0]})}},{key:"_onDrag",value:function(e){var t=e.target.getCenter();(0,this.props.dispatch)(h({center:[t.lat,t.lng],zoom:e.target.options.zoom}))}},{key:"selectTrack",value:function(e){this.setState({currentTrack:e})}},{key:"render",value:function(){var e=this,t=this.props.map,a=this.state.currentTrack,n=this.props.tracks;return r.a.createElement("div",{className:"row m-0"},r.a.createElement("div",{className:"contant-container col-md-3 p-0 pt-3"},r.a.createElement("h3",{className:"mb-3 ml-3"},"Tracks"),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",{className:"text-right"},"Actions"))),r.a.createElement("tbody",null,n.map((function(t){return r.a.createElement("tr",{key:t.id,className:a&&t.id===a.id?"bg-white":""},r.a.createElement("td",null,t.name),r.a.createElement("td",{className:"text-right"},r.a.createElement(M.a,{onClick:e.selectTrack.bind(e,t),color:"success",size:"sm",type:"button",className:"btn-icon btn-2"},r.a.createElement("span",{className:"btn-inner--icon m-0"},r.a.createElement("i",{className:"ni ni-pin-3"})))))})))))),r.a.createElement("div",{className:"map-container col-md-9 p-0"},r.a.createElement(x.a,{center:t.center,zoom:t.zoom,onDragend:this._onDrag.bind(this)},r.a.createElement(P.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.osm.org/{z}/{x}/{y}.png"}),a&&r.a.createElement($,{positions:a.path,option:{color:a.color}}),a&&a.latlng&&a.latlng.map((function(e,t){return r.a.createElement(B.a,{key:t,position:e},r.a.createElement(I.a,null,"Point ",t))})))))}}]),t}(n.Component))||Z,te=r.a.createElement(i.c,{history:C},r.a.createElement(i.b,{component:D},r.a.createElement(i.b,{path:"/",component:Q}),r.a.createElement(i.b,{path:"/tracks",component:ee})));l.a.render(r.a.createElement(o.a,{store:j},te),document.getElementById("app"))}},[[73,1,2]]]);
//# sourceMappingURL=main.efcd3be3.chunk.js.map